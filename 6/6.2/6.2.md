# 6.2. Parámetros físicos
## Tabla `Planificacion_de_asignacion`
## Parámetros físicos de la tabla `Planificacion_de_asignacion`

Los **parámetros físicos** son clave para entender cómo PostgreSQL gestionará el almacenamiento y rendimiento de la tabla. A continuación, se presentan los detalles y cálculos de los parámetros físicos para la tabla **`Planificacion_de_asignacion`**.

### 1. Tamaño de bloque:
En PostgreSQL, el **tamaño de bloque** predeterminado es de **8 KB (8,192 bytes)**.

### 2. Tamaño de Extent:
Aunque PostgreSQL no tiene un parámetro explícito para los extents, en muchos sistemas, un **extent** se refiere a un conjunto de bloques contiguos. Para propósitos de estimación, consideramos **1 extent = 8 bloques**, es decir, **64 KB**.

### 3. Estructura del Registro Lógico y Tamaño del Registro:

Los campos de la tabla `Planificacion_de_asignacion` son:

| **Campo**                      | **Tipo de Dato**   | **Tamaño Estimado** | **Descripción**                          |
|-------------------------------|--------------------|---------------------|------------------------------------------|
| `ID_Planificacion_asignacion`  | CHAR(8)            | 8 bytes             | Identificador único de la asignación    |
| `Fecha_registro`               | TIMESTAMP          | 8 bytes             | Fecha y hora de registro                |
| `Fecha_de_asignacion`          | DATE               | 4 bytes             | Fecha en que se asigna la tarea         |
| `Fecha_de_vencimiento`         | DATE               | 4 bytes             | Fecha de vencimiento de la tarea        |
| `Descripcion_de_tarea`         | VARCHAR(100)       | 100 bytes           | Descripción de la tarea                 |
| `ID_Area`                      | CHAR(8)            | 8 bytes             | Identificador del área                  |
| `ID_Equipo`                    | CHAR(8)            | 8 bytes             | Identificador del equipo asignado       |
| `ID_Empleado_Registra`         | CHAR(8)            | 8 bytes             | Empleado que registra la tarea          |
| `ID_Empleado_Solicita`         | CHAR(8)            | 8 bytes             | Empleado que solicita la tarea          |
| **Total**                      |                    | **156 bytes**       |                                          |

### 4. Espacio libre reservado (fillfactor):
El **fillfactor** determina cuántos porcentajes de los bloques de datos están llenos con datos antes de que se dejen espacios vacíos para futuras inserciones. En PostgreSQL, el valor por defecto es **100%**, pero generalmente se recomienda usar **80%**. Por lo tanto:

**Espacio libre reservado**:

\[
Espacio\ libre\ reservado = 8,192\ bytes \times 0.2 = 1,638.4\ bytes
\]

### 5. Cálculo de la cantidad de filas por bloque:

- **Tamaño total de registro**: 156 bytes.
- **Espacio útil por bloque** (con fillfactor 80%): 6,534.4 bytes.

\[
Filas\ por\ bloque = \frac{6,534.4\ bytes}{156\ bytes} = 41.9 \approx 41\ filas
\]

### 6. Cálculo de los bloques necesarios

Ahora, estimamos cuántos bloques se necesitarán para almacenar las asignaciones de tareas. Para los siguientes cálculos, vamos a asumir las proyecciones de registros para los tres años:

- **Año 1 (500 registros)**:

\[
Bloques\ necesarios = \frac{500\ registros}{41\ filas\ por\ bloque} \approx 12.2 \approx 13\ bloques
\]

- **Año 2 (600 registros)**:

\[
Bloques\ necesarios = \frac{600\ registros}{41\ filas\ por\ bloque} \approx 14.6 \approx 15\ bloques
\]

- **Año 3 (750 registros)**:

\[
Bloques\ necesarios = \frac{750\ registros}{41\ filas\ por\ bloque} \approx 18.29 \approx 19\ bloques
\]

### 7. Tamaño total estimado

El tamaño total estimado se calcula multiplicando el número de bloques por el tamaño de cada bloque:

- **Año 1** (500 registros):
  \[
  Tamaño\ total = 13\ bloques \times 8,192\ bytes = 106,496\ bytes = 106.5\ KB
  \]

- **Año 2** (600 registros):
  \[
  Tamaño\ total = 15\ bloques \times 8,192\ bytes = 122,880\ bytes = 122.9\ KB
  \]

- **Año 3** (750 registros):
  \[
  Tamaño\ total = 19\ bloques \times 8,192\ bytes = 155,648\ bytes = 152.0\ KB
  \]

---

## **Sobrecargas**

### 8. Sobrecarga de Bloque

La **sobrecarga de bloque** se refiere al espacio utilizado por la estructura de administración interna del bloque de datos, como los punteros, los metadatos de la fila y las operaciones de gestión.

En PostgreSQL, la **sobrecarga de bloque** es de **24 bytes**. Este espacio se utiliza para mantener información interna necesaria para gestionar el almacenamiento y las operaciones dentro del bloque.

**Cálculo del espacio útil por bloque**:

- **Tamaño de bloque**: 8 KB (8,192 bytes)
- **Sobrecarga de bloque**: 24 bytes

**Espacio útil por bloque**:
\[
Espacio\ útil\ por\ bloque = 8,192\ bytes - 24\ bytes = 8,168\ bytes
\]

### 9. Sobrecarga de Fila

La **sobrecarga de fila** incluye la cantidad de espacio que se utiliza para almacenar los punteros y otros metadatos relacionados con cada fila. En PostgreSQL, la **sobrecarga de fila** es de **24 bytes**.

#### **Tamaño total de fila con sobrecarga**:

El tamaño de cada registro es de **156 bytes** según el cálculo anterior. La sobrecarga de fila (24 bytes) se añade al tamaño del registro lógico.

\[
Tamaño\ total\ de\ fila = 156\ bytes + 24\ bytes = 180\ bytes
\]

### 10. Tamaño de registro lógico

El **tamaño del registro lógico** es simplemente el tamaño de la fila con los datos de los atributos, sin tener en cuenta la sobrecarga de la fila. En este caso, el **tamaño del registro lógico** es de **156 bytes**.

---

### **Resumen**

| **Elemento**                  | **Valor**                  |
|-------------------------------|----------------------------|
| **Tamaño de bloque**           | 8,192 bytes (8 KB)        |
| **Sobrecarga de bloque**       | 24 bytes                  |
| **Espacio útil por bloque**    | 8,168 bytes               |
| **Tamaño total de fila**       | 180 bytes (incluyendo sobrecarga) |
| **Tamaño del registro lógico** | 156 bytes                 |
| **Sobrecarga de fila**         | 24 bytes                  |

---

### **Cálculos finales de almacenamiento para la tabla `Planificacion_de_asignacion`**

| **Año** | **Registros Estimados** | **Bloques Necesarios** | **Tamaño Total Estimado (KB)** |
|---------|-------------------------|------------------------|--------------------------------|
| 2023    | 500                     | 13                     | 106.5 KB                      |
| 2024    | 600                     | 15                     | 122.9 KB                      |
| 2025    | 750                     | 19                     | 152.0 KB                      |

---

